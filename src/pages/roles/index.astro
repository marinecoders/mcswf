---
import Layout from '@layouts/Layout.astro';
import { displaySiteBanner } from '@components/stores.js';
import Hero from '@components/elements/Hero.svelte';
import FooterFull from '@components/FooterFull.svelte';
import ContentImageFull from '@components/sections/ContentImageFull.svelte';
import { externalLinks } from '@content/externalLinks.js';
import '../../styles/global.css';
import '../../styles/fonts.css';

const posts = await Astro.glob('../../content/roles/*.md');
let side = 'left';
displaySiteBanner.set(false);

const { frontmatter, compiledContent } = Astro.props;
---

<Layout title="Roles">
  <Hero
    client:only
    title="PICK THE PERFECT ROLE FOR YOU"
    titleClasses="w-72 md:w-96"
    backgroundImg="/images/mcswf_instruction_wide.png"
    link={externalLinks.recruitingApplication}
    externalLink={true}
    linkText="APPLY NOW"
  />

  <div class="relative z-20 max-h-screen scrollbar-hide">
    <div class="hidden lg:block">
      {
        posts.map((post) => {
          if (side == 'left') {
            side = 'right';
            return (
              <>
                <div class="relative">
                  <ContentImageFull
                    title={post.frontmatter.role}
                    titleClasses="text-mcswf-white text-2xl font-bold md:text-3xl lg:text-4xl"
                    content={post.frontmatter.about}
                    link={'/roles/' + post.frontmatter.url}
                    linkText="LEARN MORE"
                    image={`/images/${post.frontmatter.image}`}
                    imageAltText={post.frontmatter.image_alt_text}
                  />
                </div>
              </>
            );
          } else {
            side = 'left';
            return (
              <>
                <div class="relative">
                  <ContentImageFull
                    flipped
                    title={post.frontmatter.role}
                    titleClasses="text-mcswf-white text-2xl font-bold md:text-3xl lg:text-4xl"
                    content={post.frontmatter.about}
                    link={'/roles/' + post.frontmatter.url}
                    linkText="LEARN MORE"
                    image={`/images/${post.frontmatter.image}`}
                    imageAltText={post.frontmatter.image_alt_text}
                  />
                </div>
              </>
            );
          }
        })
      }
    </div>
    <div class="lg:hidden">
      {
        posts.map((post) => {
          return (
            <>
              <div class="relative">
                <ContentImageFull
                  flipped
                  title={post.frontmatter.role}
                  titleClasses="text-mcswf-white text-2xl font-bold md:text-3xl lg:text-4xl"
                  content={post.frontmatter.about}
                  link={'/roles/' + post.frontmatter.url}
                  linkText="LEARN MORE"
                  image={`/images/${post.frontmatter.image}`}
                  imageAltText={post.frontmatter.image_alt_text}
                />
              </div>
            </>
          );
        })
      }
    </div>
    <div class="pt-20">
      <FooterFull client:only />
    </div>
  </div>
</Layout>
